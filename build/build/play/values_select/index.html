<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>
      YAML -&gt; SQL
    </title>
    	<link href="https://unpkg.com/prismjs@v1.x/themes/prism.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://unpkg.com/@picocss/pico@latest/css/pico.min.css">
        <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
<script src="https://unpkg.com/sql-formatter@2.3.3/dist/sql-formatter.min.js"></script>
<script src="https://unpkg.com/prismjs@v1.x/components/prism-core.min.js"></script>
<script src="https://unpkg.com/prismjs@v1.x/components/prism-sql.min.js"></script>
<script src="https://unpkg.com/prismjs@v1.x/components/prism-yaml.min.js"></script>
	<script src="https://unpkg.com/prismjs@v1.x/plugins/autoloader/prism-autoloader.min.js"></script>

<style>
ul {
  list-style-type: none;
  margin: 0;
  padding: 0;
}

li {
  display: inline;
}
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
* {
  box-sizing: border-box;
}

/* Create two equal columns that floats next to each other */
.column {
  float: left;
  width: 45%;
  padding: 10px;
}

/* Clear floats after the columns */
.row:after {
  content: "";
  display: table;
  clear: both;
}
</style>

  </head>
  <body>
  <h1>YAML -&gt; SQL</h1>
    <div id="main" class="container">
      <ul>
<li>
    <a href="/">Simple</a>
  </li>
  <li>
    <a href="/play/lateral">Lateral join</a>
  </li>
  <li>
    <a href="/play/crosstab">Crosstab</a>
  </li>
  <li>
    <a href="/play/values_select">Values select</a>
  </li>
  <li>
    <a href="/play/values_join">Values join</a>
  </li>
  <li>
    <a href="/play/cte">CTE</a>
  </li>
  <li>
    <a href="/play/complex">Complex</a>
  </li>
  <li>
    <a href="/play/complicated">Complicated</a>
  </li>
  <li>
    <a href="/play/aggregation">Aggregation</a>
  </li>
  <li>
    <a href="/play/join">Join</a>
  </li>
  <li>
    <a href="/play/generate_series">Generate Series</a>
  </li>
  <li>
    <a href="/docs">Docs</a>
  </li>
  <li>
  <a target="_blank" href="https://stackoverflow.com/questions/60530599/how-to-express-sql-queries-in-yaml-format"><small>Why?.</small></a>
  </li>
</ul>

<div class="row">
  <div class="column">
    <h2>YAML</h2>
    <pre contenteditable>
    <code id="yaml">

main:
  with:
  - alias: codes
    fields:
    - code
    - name
    values:
    - key: &#39;us&#39;
      value: &#39;test1&#39;
    - key: &#39;fr&#39;
      value: &#39;France&#39;
    
  from: data
  distinct_on:
  - data.code
  join:
  - from: codes
    alias: countries
    type: left_join
    on:
    - left: countries.code
      operator: &quot;=&quot;
      right: data.code

    </code>
</pre>
  </div>
  <div>
    <h2>SQL</h2>
    <pre>
    <figure>
<code id="sql_code">
["/Users/dungth/learning/rubyapps/saas/docs/service/app/query.rb:705:in `block in call'", "/Users/dungth/learning/rubyapps/saas/docs/service/app/query.rb:696:in `each'", "/Users/dungth/learning/rubyapps/saas/docs/service/app/query.rb:696:in `call'", "/Users/dungth/learning/rubyapps/saas/docs/service/app/query.rb:839:in `run!'", "/Users/dungth/learning/rubyapps/saas/docs/service/app/app.rb:84:in `block in <class:App>'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/sinatra-3.0.5/lib/sinatra/base.rb:1696:in `call'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/sinatra-3.0.5/lib/sinatra/base.rb:1696:in `block in compile!'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/sinatra-3.0.5/lib/sinatra/base.rb:1009:in `block (3 levels) in route!'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/sinatra-3.0.5/lib/sinatra/base.rb:1027:in `route_eval'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/sinatra-3.0.5/lib/sinatra/base.rb:1009:in `block (2 levels) in route!'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/sinatra-3.0.5/lib/sinatra/base.rb:1058:in `block in process_route'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/sinatra-3.0.5/lib/sinatra/base.rb:1056:in `catch'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/sinatra-3.0.5/lib/sinatra/base.rb:1056:in `process_route'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/sinatra-3.0.5/lib/sinatra/base.rb:1007:in `block in route!'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/sinatra-3.0.5/lib/sinatra/base.rb:1004:in `each'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/sinatra-3.0.5/lib/sinatra/base.rb:1004:in `route!'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/sinatra-3.0.5/lib/sinatra/base.rb:1128:in `block in dispatch!'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/sinatra-3.0.5/lib/sinatra/base.rb:1099:in `catch'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/sinatra-3.0.5/lib/sinatra/base.rb:1099:in `invoke'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/sinatra-3.0.5/lib/sinatra/base.rb:1123:in `dispatch!'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/sinatra-3.0.5/lib/sinatra/base.rb:939:in `block in call!'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/sinatra-3.0.5/lib/sinatra/base.rb:1099:in `catch'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/sinatra-3.0.5/lib/sinatra/base.rb:1099:in `invoke'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/sinatra-3.0.5/lib/sinatra/base.rb:939:in `call!'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/sinatra-3.0.5/lib/sinatra/base.rb:928:in `call'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/rack-protection-3.0.5/lib/rack/protection/xss_header.rb:20:in `call'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/rack-protection-3.0.5/lib/rack/protection/path_traversal.rb:18:in `call'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/rack-protection-3.0.5/lib/rack/protection/json_csrf.rb:28:in `call'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/rack-protection-3.0.5/lib/rack/protection/base.rb:53:in `call'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/rack-protection-3.0.5/lib/rack/protection/base.rb:53:in `call'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/rack-protection-3.0.5/lib/rack/protection/frame_options.rb:33:in `call'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/rack-2.2.5/lib/rack/null_logger.rb:11:in `call'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/rack-2.2.5/lib/rack/head.rb:12:in `call'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/sinatra-3.0.5/lib/sinatra/show_exceptions.rb:23:in `call'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/sinatra-3.0.5/lib/sinatra/base.rb:219:in `call'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/sinatra-3.0.5/lib/sinatra/base.rb:2007:in `call'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/sinatra-3.0.5/lib/sinatra/base.rb:1566:in `block in call'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/sinatra-3.0.5/lib/sinatra/base.rb:1782:in `synchronize'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/sinatra-3.0.5/lib/sinatra/base.rb:1566:in `call'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/rack-test-2.0.2/lib/rack/test.rb:358:in `process_request'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/rack-test-2.0.2/lib/rack/test.rb:165:in `custom_request'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/rack-test-2.0.2/lib/rack/test.rb:114:in `get'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/3.2.0/forwardable.rb:240:in `get'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/capybara-3.38.0/lib/capybara/rack_test/browser.rb:80:in `process'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/capybara-3.38.0/lib/capybara/rack_test/browser.rb:55:in `process_and_follow_redirects'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/capybara-3.38.0/lib/capybara/rack_test/browser.rb:26:in `visit'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/capybara-3.38.0/lib/capybara/rack_test/driver.rb:46:in `visit'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/capybara-3.38.0/lib/capybara/session.rb:280:in `visit'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/bundler/gems/parklife-9d1a2d6dfddc/lib/parklife/application.rb:32:in `block in build'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/bundler/gems/parklife-9d1a2d6dfddc/lib/parklife/route_set.rb:13:in `block in each'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/3.2.0/set.rb:511:in `each_key'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/3.2.0/set.rb:511:in `each'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/bundler/gems/parklife-9d1a2d6dfddc/lib/parklife/route_set.rb:12:in `each'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/bundler/gems/parklife-9d1a2d6dfddc/lib/parklife/application.rb:31:in `build'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/bundler/gems/parklife-9d1a2d6dfddc/lib/parklife/cli.rb:7:in `build'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/thor-1.2.1/lib/thor/command.rb:27:in `run'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/thor-1.2.1/lib/thor/invocation.rb:127:in `invoke_command'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/thor-1.2.1/lib/thor.rb:392:in `dispatch'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/thor-1.2.1/lib/thor/base.rb:485:in `start'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/bundler/gems/parklife-9d1a2d6dfddc/exe/parklife:3:in `<top (required)>'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/bin/parklife:25:in `load'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/bin/parklife:25:in `<top (required)>'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/bundler-2.4.1/lib/bundler/cli/exec.rb:58:in `load'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/bundler-2.4.1/lib/bundler/cli/exec.rb:58:in `kernel_load'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/bundler-2.4.1/lib/bundler/cli/exec.rb:23:in `run'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/bundler-2.4.1/lib/bundler/cli.rb:491:in `exec'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/bundler-2.4.1/lib/bundler/vendor/thor/lib/thor/command.rb:27:in `run'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/bundler-2.4.1/lib/bundler/vendor/thor/lib/thor/invocation.rb:127:in `invoke_command'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/bundler-2.4.1/lib/bundler/vendor/thor/lib/thor.rb:392:in `dispatch'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/bundler-2.4.1/lib/bundler/cli.rb:34:in `dispatch'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/bundler-2.4.1/lib/bundler/vendor/thor/lib/thor/base.rb:485:in `start'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/bundler-2.4.1/lib/bundler/cli.rb:28:in `start'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/bundler-2.4.1/exe/bundle:45:in `block in <top (required)>'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/bundler-2.4.1/lib/bundler/friendly_errors.rb:117:in `with_friendly_errors'", "/Users/dungth/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/bundler-2.4.1/exe/bundle:33:in `<top (required)>'", "/Users/dungth/.rbenv/versions/3.2.0/bin/bundle:25:in `load'", "/Users/dungth/.rbenv/versions/3.2.0/bin/bundle:25:in `<main>'"]
</code>
</figure>
</pre>
  </div>
</div>
<script>
window.Prism = window.Prism || {};
window.Prism.manual = true;

var code = document.querySelector('#sql_code');
if (code) {
var format = window.sqlFormatter.format;
var tmp = format(code.innerHTML)
    .replace(/&gt;/g, '>')
    .replace(/&lt;/g, '<')    


code.innerHTML = window.Prism.highlight(tmp, Prism.languages.sql, 'sql');
}

var code2 = document.querySelector('#yaml');
if (code2) {
code2.innerHTML = window.Prism.highlight(code2.innerHTML, Prism.languages.yaml, 'yaml');
}

</script>


    </div>
  </body>
</html>